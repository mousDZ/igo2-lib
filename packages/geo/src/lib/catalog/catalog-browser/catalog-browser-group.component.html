<mat-list-item>
  <mat-icon
    mat-list-avatar
    igoCollapse
    class="igo-chevron"
    [target]="items"
    [collapsed]="true">
  </mat-icon>

  <h4 matLine>{{title}}</h4>

  <button
    mat-icon-button
    tooltip-position="below"
    matTooltipShowDelay="500"
    [matTooltip]="(added ? 'igo.geo.catalog.group.removeFromMap'  : 'igo.geo.catalog.group.addToMap') | translate"
    [color]="added ? 'warn' : ''"
    (click)="onToggleClick()">
    <mat-icon>
      <ng-container *ngIf="added">delete</ng-container>
      <ng-container *ngIf="!added">add</ng-container>
    </mat-icon>
  </button>
</mat-list-item>

<div #items>
  <ng-template ngFor let-item [ngForOf]="store.view.all$() | async">
    <ng-container *ngIf="isGroup(item)"></ng-container>
    <ng-container *ngIf="isLayer(item)">
      <igo-catalog-browser-layer
        igoListItem
        [layer]="item"
        [added]="state.get(item).added"
        [disabled]="state.get(item).added"
        (addedChange)="onLayerAddedChange($event)">
      </igo-catalog-browser-layer>
    </ng-container>
  </ng-template>
</div>
